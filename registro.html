<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Padel Pinto - Crear Cuenta</title>
    <script src="https://unpkg.com/mithril/mithril.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%2322c55e'/><text x='50%' y='50%' font-family='sans-serif' font-weight='900' font-style='italic' font-size='60' fill='white' text-anchor='middle' dominant-baseline='central'>P</text></svg>"
    />
    <style>
      :root {
        --padel-green: #2ecc71;
        --padel-blue: #0f172a;
      }

      body {
        font-family: "Plus Jakarta Sans", sans-serif;
        background-color: #f8fafc;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .animate-fade-up {
        animation: fadeIn 0.6s ease-out forwards;
      }

      .input-field:focus {
        border-color: var(--padel-green);
        box-shadow: 0 0 0 4px rgba(46, 204, 113, 0.1);
        outline: none;
      }
    </style>
  </head>

  <body>
    <div id="app"></div>

    <script>
      const State = {
        nombre: "",
        email: "",
        password: "",
        nivel: "1.0",
        isLoading: false,
        heroImage:
          "https://images.unsplash.com/photo-1599423300746-b62533397364?q=80&w=2070&auto=format&fit=crop",
      };

      const Actions = {
        register: (e) => {
          e.preventDefault();

          // Validación de campos obligatorios
          if (!State.nombre.trim() || !State.email.trim() || !State.password.trim()) {
            alert("Por favor, completa todos los campos marcados como obligatorios.");
            return;
          }

          // Validación de formato de email
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(State.email)) {
            alert("Por favor, introduce un correo electrónico válido (ejemplo@dominio.com).");
            return;
          }

          // Validación de seguridad básica para contraseña
          if (State.password.length < 6) {
            alert("La contraseña debe tener al menos 6 caracteres por seguridad.");
            return;
          }

          State.isLoading = true;
          // Simulamos registro y redirigimos
          setTimeout(() => {
            window.location.href = "loggedView.html?auth=success";
          }, 1500);
        },
        googleLogin: () => {
          alert("Conectando con Google...");
        }
      };

      const LeftPanel = {
        view: () =>
          m(".hidden.lg:flex.w-1/2.relative.bg-slate-900.overflow-hidden", [
            m("img", {
              src: State.heroImage,
              class: "absolute inset-0 w-full h-full object-cover opacity-50",
            }),
            m(".relative.z-10.m-auto.text-center.px-12", [
              m("h2.text-4xl.font-black.text-white.mb-6", "Únete al club."),
              m(
                "p.text-slate-300.text-lg",
                "Crea tu perfil en 30 segundos y empieza a organizar tus partidas.",
              ),
            ]),
          ]),
      };

      const RegisterForm = {
        view: () =>
          m(".w-full.lg:w-1/2.flex.items-center.justify-center.p-8.bg-white", [
            m(".w-full.max-w-md.animate-fade-up", [
              m("h1.text-3xl.font-black.text-slate-800.mb-2", "Crear cuenta"),
              m(
                "p.text-slate-400.font-medium.mb-8",
                "Completa tus datos para empezar a jugar.",
              ),

              m("form", { onsubmit: Actions.register, class: "space-y-4" }, [
                m("div", [
                  m(
                    "label.block.text-xs.font-bold.text-slate-700.uppercase.mb-2",
                    "Nombre Completo *",
                  ),
                  m(
                    "input.input-field.w-full.px-5.py-3.bg-slate-50.border.border-slate-200.rounded-2xl.text-sm.font-bold",
                    {
                      required: true,
                      placeholder: "Ej. Juan Pérez",
                      oninput: (e) => (State.nombre = e.target.value),
                    },
                  ),
                ]),
                m("div", [
                  m(
                    "label.block.text-xs.font-bold.text-slate-700.uppercase.mb-2",
                    "Email *",
                  ),
                  m(
                    "input.input-field.w-full.px-5.py-3.bg-slate-50.border.border-slate-200.rounded-2xl.text-sm.font-bold",
                    {
                      type: "email",
                      required: true,
                      placeholder: "tu@email.com",
                      oninput: (e) => (State.email = e.target.value),
                    },
                  ),
                ]),
                m("div", [
                  m(
                    "label.block.text-xs.font-bold.text-slate-700.uppercase.mb-2",
                    "Nivel de Pádel",
                  ),
                  m(
                    "select.input-field.w-full.px-5.py-3.bg-slate-50.border.border-slate-200.rounded-2xl.text-sm.font-bold.appearance-none",
                    {
                      onchange: (e) => (State.nivel = e.target.value),
                    },
                    [
                      m("option", { value: "1.0" }, "Iniciación (1.0 - 2.0)"),
                      m("option", { value: "3.0" }, "Intermedio (3.0 - 4.0)"),
                      m("option", { value: "5.0" }, "Avanzado / Pro (5.0+)"),
                    ],
                  ),
                ]),
                m("div", [
                  m(
                    "label.block.text-xs.font-bold.text-slate-700.uppercase.mb-2",
                    "Contraseña *",
                  ),
                  m(
                    "input.input-field.w-full.px-5.py-3.bg-slate-50.border.border-slate-200.rounded-2xl.text-sm.font-bold",
                    {
                      type: "password",
                      required: true,
                      placeholder: "••••••••",
                      oninput: (e) => (State.password = e.target.value),
                    },
                  ),
                ]),
                m(
                  "button",
                  {
                    type: "submit",
                    disabled: State.isLoading,
                    class: `w-full py-4 rounded-2xl font-black text-sm transition-all transform active:scale-95 shadow-xl mt-4 ${
                      State.isLoading
                        ? "bg-slate-100 text-slate-400 cursor-not-allowed"
                        : "bg-green-500 text-slate-900 shadow-green-100 hover:bg-green-400"
                    }`,
                  },
                  State.isLoading ? "CREANDO CUENTA..." : "REGISTRARSE",
                ),
              ]),

              m("div", { class: "relative py-8" }, [
                m(
                  "div",
                  { class: "absolute inset-0 flex items-center" },
                  m("div", { class: "w-full border-t border-slate-100" }),
                ),
                m(
                  "div",
                  { class: "relative flex justify-center text-xs" },
                  m(
                    "span",
                    { class: "px-4 bg-white text-slate-400 font-bold" },
                    "O continúe con",
                  ),
                ),
              ]),

              // Botón Google
              m(
                "button",
                {
                  type: "button",
                  onclick: Actions.googleLogin,
                  class:
                    "w-full py-4 bg-white border border-slate-200 rounded-2xl text-sm font-bold text-slate-600 hover:bg-slate-50 transition flex items-center justify-center gap-3",
                },
                [m("span", { class: "text-lg" }, "G"), "Google"],
              ),

              m("p.mt-20.text-center.text-sm.font-medium.text-slate-500", [
                "¿Ya tienes cuenta? ",
                m(
                  "a",
                  {
                    href: "login.html",
                    class: "text-green-600 font-bold hover:underline",
                  },
                  "Inicia sesión",
                ),
              ]),
            ]),
          ]),
      };

      m.mount(document.getElementById("app"), {
        view: () => m(".min-h-screen.flex", [m(LeftPanel), m(RegisterForm)]),
      });
    </script>
  </body>
</html>